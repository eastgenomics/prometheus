#!/bin/bash
# takes the file output from vep (input_file), its category (prod_or_dev),
# and the path to the parsed output file to be generated by the script
# returns simplified vep output with only fields relevant to analysis
# inputs: input_file (string), prod_or_dev (string), output_path (string)
# output: file

input_file=$1
prod_or_dev=$2
output_path=$3
input_basename=$( basename $input_file )
file_name="${input_basename%_markdup_recalibrated_Haplotyper_annotated.vcf}"
bcftools +split-vep $input_file -f '%CHROM:%POS:%REF:%ALT %ClinVar %ClinVar_CLNSIG %ClinVar_CLNSIGCONF\n' -d | uniq > ${output_path}${file_name}.${prod_or_dev}.txt
